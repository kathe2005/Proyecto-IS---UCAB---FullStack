<div id="ContenedorMain">
  <div id="contenedor">
    <!-- Header -->
    <div class="header-section">
      <h1 class="titulo-principal">Sistema de Gestión de Estacionamiento</h1>
      <p class="subtitulo">Universidad Católica Andrés Bello - UCAB Montalbán</p>
    </div>

    <!-- Título de la sección -->
    <div class="section-title">
      <h2>Ocupar Puesto de Estacionamiento</h2>
      <p>Seleccione un puesto disponible y complete la información</p>
    </div>

    <!-- Mensajes de resultado -->
    <div *ngIf="mensaje" [class]="'alert alert-' + mensajeTipo" class="alert">
      <i class="fas fa-info-circle"></i> {{ mensaje }}
    </div>

    <!-- Selección de puestos -->
    <div *ngIf="!puestoSeleccionado">
      <div class="card section-card">
        <div class="card-content">
          <div class="icono">
            <i class="fas fa-list"></i>
          </div>
          <div class="texto">
            <h3>Puestos Disponibles</h3>
            <p>Seleccione un puesto de la lista para ocuparlo</p>
          </div>
        </div>
      </div>

      <!-- Grid de puestos disponibles -->
      <div class="puestos-grid">
        <div *ngFor="let puesto of puestosDisponibles"
             class="puesto-card"
             (click)="seleccionarPuesto(puesto)">
          <div class="puesto-header">
            <h5>{{ puesto.numero }}</h5>
            <span class="badge" [style.background-color]="getTipoColor(puesto.tipoPuesto)">
              {{ getTipoDescripcion(puesto.tipoPuesto) }}
            </span>
          </div>
          <div class="puesto-info">
            <p><i class="fas fa-map-marker-alt"></i> {{ puesto.ubicacion }}</p>
            <small class="text-muted"><i class="fas fa-hashtag"></i> ID: {{ puesto.id }}</small>
          </div>
        </div>
      </div>

      <!-- Mensaje cuando no hay puestos -->
      <div *ngIf="puestosDisponibles.length === 0" class="alert alert-warning">
        <i class="fas fa-exclamation-triangle"></i>
        No hay puestos disponibles en este momento.
      </div>
    </div>

    <!-- Confirmación de ocupación -->
    <div *ngIf="puestoSeleccionado">
      <!-- Sección de confirmación -->
      <div class="card section-card confirmacion-card">
        <div class="card-content">
          <div class="icono">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="texto">
            <h3>Confirmar Ocupación</h3>
            <p>Complete la información para ocupar el puesto seleccionado</p>
          </div>
        </div>
      </div>

      <!-- Información del puesto seleccionado -->
      <div class="card info-card">
        <div class="card-content">
          <h4 class="info-title">Información del Puesto Seleccionado</h4>
          <div class="info-grid">
            <div class="info-item">
              <label>Número:</label>
              <span class="info-value">{{ puestoSeleccionado.numero }}</span>
            </div>
            <div class="info-item">
              <label>Ubicación:</label>
              <span class="info-value">{{ puestoSeleccionado.ubicacion }}</span>
            </div>
            <div class="info-item">
              <label>Tipo:</label>
              <span class="badge" [style.background-color]="getTipoColor(puestoSeleccionado.tipoPuesto)">
                {{ getTipoDescripcion(puestoSeleccionado.tipoPuesto) }}
              </span>
            </div>
            <div class="info-item">
              <label>ID:</label>
              <span class="info-value">{{ puestoSeleccionado.id }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Formulario de información del cliente -->
      <div class="card form-card">
        <div class="card-content">
          <h4 class="form-title">Información del Cliente</h4>
          <form (ngSubmit)="confirmarOcupacion()" class="ocupacion-form">

            <div class="form-row">
              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-user"></i> Usuario (ID del Cliente)
                </label>
                <input type="text" [(ngModel)]="ocuparRequest.usuario" name="usuario"
                       class="form-control" placeholder="Ingrese su usuario" required>
              </div>

              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-id-card"></i> ID del Cliente
                </label>
                <input type="text" [(ngModel)]="ocuparRequest.clienteId" name="clienteId"
                       class="form-control" placeholder="Ingrese ID del cliente" required>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                <i class="fas fa-users"></i> Tipo de Cliente
              </label>
              <select [(ngModel)]="ocuparRequest.tipoCliente" name="tipoCliente" class="form-select" required>
                <option value="">-- Seleccione tipo --</option>
                <option value="UCAB">UCAB</option>
                <option value="VISITANTE">Visitante</option>
              </select>
            </div>

            <div class="form-actions">
              <button type="button" (click)="cancelarSeleccion()" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Volver
              </button>
              <button type="submit" class="btn btn-primary" [disabled]="procesando">
                <i class="fas fa-car"></i>
                {{ procesando ? 'Procesando...' : 'Confirmar Ocupación' }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    © 2025 UCAB Montalbán - Sistema de Estacionamiento
  </footer>
</div>
